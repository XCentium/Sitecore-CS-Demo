@using Sitecore.Links;
@using Sitecore.Mvc;
@using Sitecore.Resources.Media;
@using System.Linq;
@inherits Glass.Mapper.Sc.Web.Mvc.GlassView<IEnumerable<CSDemo.Models.Product.Product>>
@if (Model != null && Model.Any())
{
    <div class="releated-products">
        <h2>Complementary Products</h2>
        <div class="row grid" id="products">
            @foreach (var product in Model)
            {
                    <div class="col-sm-3 col-xs-6">
                        @using (BeginEditFrame(product, "Edit Related Product", x => x.Images, x => x.Title, x => x.ProductId, x => x.CatalogName, x => x.VariantProdId, x => x.DefaultVariant, x => x.IsNew, x => x.IsOnSale, x => x.Rating, x => x.ListPrice, x => x.Brand, x => x.Description, x => x.VariantSize, x => x.VariantColors, x => x.FullDescription, x => x.DateOfIntroduction, x => x.Size, x => x.Price, x => x.DefinitionName, x => x.Categories, x => x.SortFields, x => x.ItemsPerPage, x => x.Variants))
                        {
                        <article class="product-item">
                            <div class="row">
                                <div class="col-sm-3">
                                    <div class="product-overlay">
                                        <div class="product-mask"></div>
                                        <a href="@product.Url" class="product-permalink"></a>
                                        @RenderImage(product.Images.ElementAt(0), x => x, new { AS = 1, W=200, H=300, @class = "img-responsive" }, isEditable: false)

                                        @*@*Per Vasiliy, leave out for now*@
                                        @*<div class="product-quickview">
                                                <a href="@product.Url" class="btn btn-quickview" data-toggle="modal" data-target="#product-quickview">View Product</a>
                                            </div>*@
                                    </div>
                                </div>
                                <div class="col-sm-9">
                                    <div class="product-body">
                                        <h3>
                                            <a href="@product.Url">@product.Title</a>
                                        </h3>
                                        @*Per Vasiliy, add for now*@
                                        <div class="product-rating">
                                            <i class="fa fa-star@(product.Rating>0 ? string.Empty:"-o" )"></i>
                                            <i class="fa fa-star@(product.Rating>1 ? string.Empty:"-o" )"></i>
                                            <i class="fa fa-star@(product.Rating>2 ? string.Empty:"-o" )"></i>
                                            <i class="fa fa-star@(product.Rating>3 ? string.Empty:"-o" )"></i>
                                            <i class="fa fa-star@(product.Rating>4 ? string.Empty:"-o" )"></i>
                                        </div>
                                        <span class="price">
                                            @*Per Vasiliy, leave out for now*@
                                            @*<ins><span class="amount">@featuredProduct.Price.ToString("C")</span></ins>*@

                                            <ins><span class="amount">@product.Price.ToString("C")</span></ins>
                                        </span>
                                        <br /><br />
                                    </div>
                                </div>
                            </div>
                        </article>
                        }
                    </div>
            }
        </div>
    </div>
}